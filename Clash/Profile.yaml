mixed-port: 7890 # æ··åˆç«¯å£
allow-lan: false # å…è®¸å±€åŸŸç½‘è¿æ¥
mode: rule # è§„åˆ™æ¨¡å¼
log-level: info # æ—¥å¿—çº§åˆ«
ipv6: false # IPV6å¼€å…³

geodata-mode: true
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"

dns:
  enable: true
  listen: :1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:!cn":
      - "https://dns.cloudflare.com/dns-query#dns"
      - "https://dns.google/dns-query#dns"
######### é”šç‚¹ start #######
p:
  &p {
    type: http,
    interval: 86400,
    health-check:
      {
        enable: true,
        url: https://en.wikipedia.org/wiki/1989_Tiananmen_Square_protests_and_massacre,
        interval: 300,
      },
  }
auto:
  &auto {
    type: url-test,
    lazy: true,
    url: https://en.wikipedia.org/wiki/1989_Tiananmen_Square_protests_and_massacre,
    interval: 300,
    use: [Subscribe],
  }
use: &use { type: select, use: [Subscribe] }
load-balance:
  &load-balance {
    type: load-balance,
    use: [Subscribe],
    url: https://en.wikipedia.org/wiki/1989_Tiananmen_Square_protests_and_massacre,
    interval: 300,
    strategy: round-robin,
  }
c: &classical { type: http, behavior: classical, interval: 86400 }
d: &domain { type: http, behavior: domain, interval: 86400 }
i: &ipcidr { type: http, behavior: ipcidr, interval: 86400 }
######### é”šç‚¹ end #######

proxy-providers:
  Subscribe:
    <<: *p
    url: https://mirror.ghproxy.com/https://gist.githubusercontent.com/
    path: ./proxy_providers/tmp.yaml
proxies: null
proxy-groups:
  [
    { name: ğŸ‡ºğŸ‡¸ United States, <<: *use, filter: ğŸ‡ºğŸ‡¸(?!.*Ã—) },
    { name: ğŸ‡¬ğŸ‡§ Great Britain, <<: *use, filter: ğŸ‡¬ğŸ‡§ },
    { name: ğŸ‡¸ğŸ‡¬ Singapore, <<: *use, filter: ğŸ‡¸ğŸ‡¬ },
    { name: ğŸ¤– AIs, <<: *use, filter: ğŸ‡ºğŸ‡¸.*\d+(\.\d)?Ã— },
    { name: â¬ Downloads, type: select, proxies: [ğŸ˜ˆ Melancholy, ğŸ˜‡ Rhapsody] },
    { name: âš–ï¸ Load Balance, <<: *load-balance, filter: S\s.* },
    { name: ğŸ˜ˆ Melancholy, <<: *auto, filter: (P|A)\s.* },
    { name: ğŸ˜‡ Rhapsody, type: select, use: [Subscribe], filter: 0\.\d+ },
  ]
rule-providers:
  Downloads:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml,
      path: ./ruleset/Downloads.yaml,
    }
  Emby:
    {
      <<: *classical,
      url: https://raw.tuu.cat/Aurora-20/Proxy/main/Rules/Clash/Emby/Emby.yaml,
      path: ./ruleset/Emby.yaml,
    }
  DMCA:
    {
      <<: *classical,
      url: https://raw.tuu.cat/Aurora-20/Proxy/main/Rules/Clash/DMCA/DMCA.yaml,
      path: ./ruleset/DMCA.yaml,
    }
  OpenAI:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml,
      path: ./ruleset/OpenAI.yaml,
    }
  Gemini:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml,
      path: ./ruleset/Gemini.yaml,
    }
  Claude:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml,
      path: ./ruleset/Claude.yaml,
    }
rules:
  - GEOIP,Lan,DIRECT,no-resolve
  - GEOSITE,CN,DIRECT,no-resolve
  - GEOIP,CN,DIRECT,no-resolve
  - IP-ASN,62014,ğŸ‡¸ğŸ‡¬ Singapore,no-resolve
  - OR,((IP-ASN,62041,no-resolve),(IP-ASN,44097,no-resolve)),ğŸ‡¬ğŸ‡§ Great Britain,
  - RULE-SET,Downloads,â¬ Downloads,no-resolve
  - RULE-SET,Emby,â¬ Downloads,no-resolve
  - RULE-SET,OpenAI,ğŸ¤– AIs,no-resolve
  - RULE-SET,Gemini,ğŸ¤– AIs,no-resolve
  - RULE-SET,Claude,ğŸ¤– AIs,no-resolve
  - RULE-SET,DMCA,âš–ï¸ Load Balance,no-resolve
  - MATCH,ğŸ‡ºğŸ‡¸ United States
